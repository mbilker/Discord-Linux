'use strict';

console.log('I run before anything else');

var VoiceEngine = require('remote').require('./VoiceEngine');
var runWebpackCb = false;

function noop() {}

/*
var VoiceEngineShim = {
  supported: true,

  autoEnable: false,

  enable: VoiceEngine.enable,

  supportsAutomaticVAD() {
    return false;
  },

  supportsMultiplePTT() {
    return true;
  },

  supportsPTTReleaseDelay() {
    return true;
  },

  setForceSend: VoiceEngine.setPTTActive,
  setInputMode: VoiceEngine.setInputMode,
  setOutputVolume: VoiceEngine.setOutputVolume,

  setVolumeChangeCallback: noop,

  setSelfMute: VoiceEngine.setSelfMute,
  setSelfDeaf: VoiceEngine.setSelfDeaf,
  setLocalMute: VoiceEngine.setLocalMute,
  setLocalVolume: VoiceEngine.setLocalVolume,
  createUser: VoiceEngine.createUser,
  destroyUser: VoiceEngine.destroyUser,
  //onSpeaking: VoiceEngine.onSpeaking,
  //onVoiceActivity: VoiceEngine.onVoiceActivity,
  //onDevicesChanged: VoiceEngine.onDevicesChanged,

  canSetInputDevice() {
    return true;
  },

  getInputDevices: VoiceEngine.getInputDevices,
  setInputDevice: VoiceEngine.setInputDevice,

  canSetOutputDevice() {
    return false;
  },

  setOutputDevice: noop,

  getOutputDevices: VoiceEngine.getOutputDevices,
  setEncodingBitRate: VoiceEngine.setEncodingBitRate,

  supportsEncodingBitRate() {
    return true;
  },

  setEchoCancellation: VoiceEngine.setEchoCancellation,
  setNoiseSuppression: VoiceEngine.setNoiseSuppression,
  setAutomaticGainControl: VoiceEngine.setAutomaticGainControl,

  canSetAttenuation() {
    return false;
  },

  canSetVoiceProcessing() {
    return true;
  },

  setAttenuation: noop,

  onConnectionState: VoiceEngine.onConnectionState,
  connect: VoiceEngine.connect,
  disconnect: VoiceEngine.disconnect,
  handleSessionDescription: VoiceEngine.handleSessionDescription,
  handleSpeaking: VoiceEngine.handleSpeaking,
  debugDump: VoiceEngine.debugDump,

  setNoInputCallback: noop,
  setNoInputThreshold: noop,

  collectDiagnostics(callback) {
    callback(null);
  },

  diagnosticsEnabled: false,

  runDiagnostics(callback) {
    callback(null);
  },

  getDiagnosticInfo() {
    return null;
  },

  supportsNativePing: false,

  setInputVolume: noop,
  setPingCallback: noop,

  playSound: VoiceEngine.playSound,

  Constants: {}
};
*/

function webpackCb(chunkIds, moreModules) {
  if (runWebpackCb) return;
  runWebpackCb = true;

  console.log('parent webpack');

  setImmediate(afterInitialJsonp);
}

function findWebpackModule(exportedToLookFor) {
  var webpackRequire = window.__webpackRequire;
  var mod = webpackRequire.c;
  var results = [];

  for (var i = 0; i < webpackRequire.m.length; i++) {
    if (mod[i] && mod[i].exports && exportedToLookFor.every(function (x) {
      return mod[i].exports[x];
    })) {
      results.push(mod[i]);
    }
  }

  return results;
}

function findWebRTCModule() {
  var voiceLoader = findWebpackModule(['handleSessionDescription']).filter(function (x) {
    return __webpackRequire.m[x.id].toString().match(/webkitGetUserMedia/);
  })[0];
  if (!voiceLoader) {
    throw new Error('Cannot find voice engine loader');
  }
  var text = __webpackRequire.m[voiceLoader.id].toString();
  var reg = /n\(([0-9]+)\)/g;
  var results = [];
  var res = null;

  while (res = reg.exec(text)) {
    results.push(res);
  }

  return results.filter(function (x) {
    return !__webpackRequire.c[x[1]];
  }).map(function (x) {
    return parseInt(x[1]);
  })[0];
}

function injectedModule(module, exports, webpackRequire) {
  console.log('injected module');

  var modules = webpackRequire.c;
  var webpackVoiceEngines = [0];

  window.__webpackRequire = webpackRequire;
  window.__voiceEngines = webpackVoiceEngines;

  for (var i = 0; i < webpackRequire.m.length; i++) {
    if (modules[i] && modules[i].exports && modules[i].exports.handleSessionDescription) {
      webpackVoiceEngines[0] = modules[i];
      break;
    }
  }

  //if (webpackVoiceEngines[0]) {
  //  console.log('Found exports of NativeVoiceEngine, setting to shim...');
  //  for (var i = 0; i < webpackVoiceEngines.length; i++) {
  //    Object.assign(webpackVoiceEngines[i].exports, VoiceEngineShim);
  //  }
  //}

  if (webpackVoiceEngines[0]) {
    var num = findWebRTCModule();
    var obj = __webpackRequire(num);

    for (var i = 0; i < webpackVoiceEngines.length; i++) {
      Object.assign(webpackVoiceEngines[i].exports, obj);
      webpackVoiceEngines[i].playSound = VoiceEngine.playSound;
    }
  }

  module.exports = { mbilker: true };
}

function afterInitialJsonp() {
  console.log(window['webpackJsonp']);

  window['webpackJsonp']([0], [injectedModule]);
}

//window['webpackJsonp'] = console.log.bind(console, 'parent webpack:');
window['webpackJsonp'] = webpackCb;
window['findWebpackModule'] = findWebpackModule;
window['findWebRTCModule'] = findWebRTCModule;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYi5Wb2ljZUVuZ2luZS5zaGltLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsUUFBUSxHQUFSLENBQVksNEJBQVo7O0FBRUEsSUFBSSxjQUFjLFFBQVEsUUFBUixFQUFrQixPQUFsQixDQUEwQixlQUExQixDQUFkO0FBQ0osSUFBSSxlQUFlLEtBQWY7O0FBRUosU0FBUyxJQUFULEdBQWdCLEVBQWhCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTJHQSxTQUFTLFNBQVQsQ0FBbUIsUUFBbkIsRUFBNkIsV0FBN0IsRUFBMEM7QUFDeEMsTUFBSSxZQUFKLEVBQWtCLE9BQWxCO0FBQ0EsaUJBQWUsSUFBZixDQUZ3Qzs7QUFJeEMsVUFBUSxHQUFSLENBQVksZ0JBQVosRUFKd0M7O0FBTXhDLGVBQWEsaUJBQWIsRUFOd0M7Q0FBMUM7O0FBU0EsU0FBUyxpQkFBVCxDQUEyQixpQkFBM0IsRUFBOEM7QUFDNUMsTUFBTSxpQkFBaUIsT0FBTyxnQkFBUCxDQURxQjtBQUU1QyxNQUFNLE1BQU0sZUFBZSxDQUFmLENBRmdDO0FBRzVDLE1BQUksVUFBVSxFQUFWLENBSHdDOztBQUs1QyxPQUFLLElBQUksSUFBSSxDQUFKLEVBQU8sSUFBSSxlQUFlLENBQWYsQ0FBaUIsTUFBakIsRUFBeUIsR0FBN0MsRUFBa0Q7QUFDaEQsUUFBSSxJQUFJLENBQUosS0FBVSxJQUFJLENBQUosRUFBTyxPQUFQLElBQWtCLGtCQUFrQixLQUFsQixDQUF3QjthQUFLLElBQUksQ0FBSixFQUFPLE9BQVAsQ0FBZSxDQUFmO0tBQUwsQ0FBcEQsRUFBNkU7QUFDL0UsY0FBUSxJQUFSLENBQWEsSUFBSSxDQUFKLENBQWIsRUFEK0U7S0FBakY7R0FERjs7QUFNQSxTQUFPLE9BQVAsQ0FYNEM7Q0FBOUM7O0FBY0EsU0FBUyxnQkFBVCxHQUE0QjtBQUMxQixNQUFNLGNBQWMsa0JBQWtCLENBQUMsMEJBQUQsQ0FBbEIsRUFDakIsTUFEaUIsQ0FDVjtXQUFLLGlCQUFpQixDQUFqQixDQUFtQixFQUFFLEVBQUYsQ0FBbkIsQ0FBeUIsUUFBekIsR0FBb0MsS0FBcEMsQ0FBMEMsb0JBQTFDO0dBQUwsQ0FEVSxDQUM0RCxDQUQ1RCxDQUFkLENBRG9CO0FBRzFCLE1BQUksQ0FBQyxXQUFELEVBQWM7QUFDaEIsVUFBTSxJQUFJLEtBQUosQ0FBVSxpQ0FBVixDQUFOLENBRGdCO0dBQWxCO0FBR0EsTUFBTSxPQUFPLGlCQUFpQixDQUFqQixDQUFtQixZQUFZLEVBQVosQ0FBbkIsQ0FBbUMsUUFBbkMsRUFBUCxDQU5vQjtBQU8xQixNQUFNLE1BQU0sZ0JBQU4sQ0FQb0I7QUFRMUIsTUFBSSxVQUFVLEVBQVYsQ0FSc0I7QUFTMUIsTUFBSSxNQUFNLElBQU4sQ0FUc0I7O0FBVzFCLFNBQVEsTUFBTSxJQUFJLElBQUosQ0FBUyxJQUFULENBQU4sRUFBdUI7QUFDN0IsWUFBUSxJQUFSLENBQWEsR0FBYixFQUQ2QjtHQUEvQjs7QUFJQSxTQUFPLFFBQ0osTUFESSxDQUNHO1dBQUssQ0FBQyxpQkFBaUIsQ0FBakIsQ0FBbUIsRUFBRSxDQUFGLENBQW5CLENBQUQ7R0FBTCxDQURILENBRUosR0FGSSxDQUVBO1dBQUssU0FBUyxFQUFFLENBQUYsQ0FBVDtHQUFMLENBRkEsQ0FFcUIsQ0FGckIsQ0FBUCxDQWYwQjtDQUE1Qjs7QUFvQkEsU0FBUyxjQUFULENBQXdCLE1BQXhCLEVBQWdDLE9BQWhDLEVBQXlDLGNBQXpDLEVBQXlEO0FBQ3ZELFVBQVEsR0FBUixDQUFZLGlCQUFaLEVBRHVEOztBQUd2RCxNQUFNLFVBQVUsZUFBZSxDQUFmLENBSHVDO0FBSXZELE1BQUksc0JBQXNCLENBQUMsQ0FBRCxDQUF0QixDQUptRDs7QUFNdkQsU0FBTyxnQkFBUCxHQUEwQixjQUExQixDQU51RDtBQU92RCxTQUFPLGNBQVAsR0FBd0IsbUJBQXhCLENBUHVEOztBQVN2RCxPQUFLLElBQUksSUFBSSxDQUFKLEVBQU8sSUFBSSxlQUFlLENBQWYsQ0FBaUIsTUFBakIsRUFBeUIsR0FBN0MsRUFBa0Q7QUFDaEQsUUFBSSxRQUFRLENBQVIsS0FBYyxRQUFRLENBQVIsRUFBVyxPQUFYLElBQXNCLFFBQVEsQ0FBUixFQUFXLE9BQVgsQ0FBbUIsd0JBQW5CLEVBQTZDO0FBQ25GLDBCQUFvQixDQUFwQixJQUF5QixRQUFRLENBQVIsQ0FBekIsQ0FEbUY7QUFFbkYsWUFGbUY7S0FBckY7R0FERjs7Ozs7Ozs7O0FBVHVELE1BdUJuRCxvQkFBb0IsQ0FBcEIsQ0FBSixFQUE0QjtBQUMxQixRQUFNLE1BQU0sa0JBQU4sQ0FEb0I7QUFFMUIsUUFBTSxNQUFNLGlCQUFpQixHQUFqQixDQUFOLENBRm9COztBQUkxQixTQUFLLElBQUksSUFBSSxDQUFKLEVBQU8sSUFBSSxvQkFBb0IsTUFBcEIsRUFBNEIsR0FBaEQsRUFBcUQ7QUFDbkQsYUFBTyxNQUFQLENBQWMsb0JBQW9CLENBQXBCLEVBQXVCLE9BQXZCLEVBQWdDLEdBQTlDLEVBRG1EO0FBRW5ELDBCQUFvQixDQUFwQixFQUF1QixTQUF2QixHQUFtQyxZQUFZLFNBQVosQ0FGZ0I7S0FBckQ7R0FKRjs7QUFVQSxTQUFPLE9BQVAsR0FBaUIsRUFBRSxTQUFTLElBQVQsRUFBbkIsQ0FqQ3VEO0NBQXpEOztBQW9DQSxTQUFTLGlCQUFULEdBQTZCO0FBQzNCLFVBQVEsR0FBUixDQUFZLE9BQU8sY0FBUCxDQUFaLEVBRDJCOztBQUczQixTQUFPLGNBQVAsRUFBdUIsQ0FBQyxDQUFELENBQXZCLEVBQTRCLENBQUMsY0FBRCxDQUE1QixFQUgyQjtDQUE3Qjs7O0FBT0EsT0FBTyxjQUFQLElBQXlCLFNBQXpCO0FBQ0EsT0FBTyxtQkFBUCxJQUE4QixpQkFBOUI7QUFDQSxPQUFPLGtCQUFQLElBQTZCLGdCQUE3QiIsImZpbGUiOiJ3ZWIuVm9pY2VFbmdpbmUuc2hpbS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnNvbGUubG9nKCdJIHJ1biBiZWZvcmUgYW55dGhpbmcgZWxzZScpO1xuXG52YXIgVm9pY2VFbmdpbmUgPSByZXF1aXJlKCdyZW1vdGUnKS5yZXF1aXJlKCcuL1ZvaWNlRW5naW5lJyk7XG52YXIgcnVuV2VicGFja0NiID0gZmFsc2U7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4vKlxudmFyIFZvaWNlRW5naW5lU2hpbSA9IHtcbiAgc3VwcG9ydGVkOiB0cnVlLFxuXG4gIGF1dG9FbmFibGU6IGZhbHNlLFxuXG4gIGVuYWJsZTogVm9pY2VFbmdpbmUuZW5hYmxlLFxuXG4gIHN1cHBvcnRzQXV0b21hdGljVkFEKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcblxuICBzdXBwb3J0c011bHRpcGxlUFRUKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIHN1cHBvcnRzUFRUUmVsZWFzZURlbGF5KCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIHNldEZvcmNlU2VuZDogVm9pY2VFbmdpbmUuc2V0UFRUQWN0aXZlLFxuICBzZXRJbnB1dE1vZGU6IFZvaWNlRW5naW5lLnNldElucHV0TW9kZSxcbiAgc2V0T3V0cHV0Vm9sdW1lOiBWb2ljZUVuZ2luZS5zZXRPdXRwdXRWb2x1bWUsXG5cbiAgc2V0Vm9sdW1lQ2hhbmdlQ2FsbGJhY2s6IG5vb3AsXG5cbiAgc2V0U2VsZk11dGU6IFZvaWNlRW5naW5lLnNldFNlbGZNdXRlLFxuICBzZXRTZWxmRGVhZjogVm9pY2VFbmdpbmUuc2V0U2VsZkRlYWYsXG4gIHNldExvY2FsTXV0ZTogVm9pY2VFbmdpbmUuc2V0TG9jYWxNdXRlLFxuICBzZXRMb2NhbFZvbHVtZTogVm9pY2VFbmdpbmUuc2V0TG9jYWxWb2x1bWUsXG4gIGNyZWF0ZVVzZXI6IFZvaWNlRW5naW5lLmNyZWF0ZVVzZXIsXG4gIGRlc3Ryb3lVc2VyOiBWb2ljZUVuZ2luZS5kZXN0cm95VXNlcixcbiAgLy9vblNwZWFraW5nOiBWb2ljZUVuZ2luZS5vblNwZWFraW5nLFxuICAvL29uVm9pY2VBY3Rpdml0eTogVm9pY2VFbmdpbmUub25Wb2ljZUFjdGl2aXR5LFxuICAvL29uRGV2aWNlc0NoYW5nZWQ6IFZvaWNlRW5naW5lLm9uRGV2aWNlc0NoYW5nZWQsXG5cbiAgY2FuU2V0SW5wdXREZXZpY2UoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgZ2V0SW5wdXREZXZpY2VzOiBWb2ljZUVuZ2luZS5nZXRJbnB1dERldmljZXMsXG4gIHNldElucHV0RGV2aWNlOiBWb2ljZUVuZ2luZS5zZXRJbnB1dERldmljZSxcblxuICBjYW5TZXRPdXRwdXREZXZpY2UoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIHNldE91dHB1dERldmljZTogbm9vcCxcblxuICBnZXRPdXRwdXREZXZpY2VzOiBWb2ljZUVuZ2luZS5nZXRPdXRwdXREZXZpY2VzLFxuICBzZXRFbmNvZGluZ0JpdFJhdGU6IFZvaWNlRW5naW5lLnNldEVuY29kaW5nQml0UmF0ZSxcblxuICBzdXBwb3J0c0VuY29kaW5nQml0UmF0ZSgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcblxuICBzZXRFY2hvQ2FuY2VsbGF0aW9uOiBWb2ljZUVuZ2luZS5zZXRFY2hvQ2FuY2VsbGF0aW9uLFxuICBzZXROb2lzZVN1cHByZXNzaW9uOiBWb2ljZUVuZ2luZS5zZXROb2lzZVN1cHByZXNzaW9uLFxuICBzZXRBdXRvbWF0aWNHYWluQ29udHJvbDogVm9pY2VFbmdpbmUuc2V0QXV0b21hdGljR2FpbkNvbnRyb2wsXG5cbiAgY2FuU2V0QXR0ZW51YXRpb24oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIGNhblNldFZvaWNlUHJvY2Vzc2luZygpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcblxuICBzZXRBdHRlbnVhdGlvbjogbm9vcCxcblxuICBvbkNvbm5lY3Rpb25TdGF0ZTogVm9pY2VFbmdpbmUub25Db25uZWN0aW9uU3RhdGUsXG4gIGNvbm5lY3Q6IFZvaWNlRW5naW5lLmNvbm5lY3QsXG4gIGRpc2Nvbm5lY3Q6IFZvaWNlRW5naW5lLmRpc2Nvbm5lY3QsXG4gIGhhbmRsZVNlc3Npb25EZXNjcmlwdGlvbjogVm9pY2VFbmdpbmUuaGFuZGxlU2Vzc2lvbkRlc2NyaXB0aW9uLFxuICBoYW5kbGVTcGVha2luZzogVm9pY2VFbmdpbmUuaGFuZGxlU3BlYWtpbmcsXG4gIGRlYnVnRHVtcDogVm9pY2VFbmdpbmUuZGVidWdEdW1wLFxuXG4gIHNldE5vSW5wdXRDYWxsYmFjazogbm9vcCxcbiAgc2V0Tm9JbnB1dFRocmVzaG9sZDogbm9vcCxcblxuICBjb2xsZWN0RGlhZ25vc3RpY3MoY2FsbGJhY2spIHtcbiAgICBjYWxsYmFjayhudWxsKTtcbiAgfSxcblxuICBkaWFnbm9zdGljc0VuYWJsZWQ6IGZhbHNlLFxuXG4gIHJ1bkRpYWdub3N0aWNzKGNhbGxiYWNrKSB7XG4gICAgY2FsbGJhY2sobnVsbCk7XG4gIH0sXG5cbiAgZ2V0RGlhZ25vc3RpY0luZm8oKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG5cbiAgc3VwcG9ydHNOYXRpdmVQaW5nOiBmYWxzZSxcblxuICBzZXRJbnB1dFZvbHVtZTogbm9vcCxcbiAgc2V0UGluZ0NhbGxiYWNrOiBub29wLFxuXG4gIHBsYXlTb3VuZDogVm9pY2VFbmdpbmUucGxheVNvdW5kLFxuXG4gIENvbnN0YW50czoge31cbn07XG4qL1xuXG5mdW5jdGlvbiB3ZWJwYWNrQ2IoY2h1bmtJZHMsIG1vcmVNb2R1bGVzKSB7XG4gIGlmIChydW5XZWJwYWNrQ2IpIHJldHVybjtcbiAgcnVuV2VicGFja0NiID0gdHJ1ZTtcblxuICBjb25zb2xlLmxvZygncGFyZW50IHdlYnBhY2snKTtcblxuICBzZXRJbW1lZGlhdGUoYWZ0ZXJJbml0aWFsSnNvbnApO1xufVxuXG5mdW5jdGlvbiBmaW5kV2VicGFja01vZHVsZShleHBvcnRlZFRvTG9va0Zvcikge1xuICBjb25zdCB3ZWJwYWNrUmVxdWlyZSA9IHdpbmRvdy5fX3dlYnBhY2tSZXF1aXJlO1xuICBjb25zdCBtb2QgPSB3ZWJwYWNrUmVxdWlyZS5jO1xuICBsZXQgcmVzdWx0cyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgd2VicGFja1JlcXVpcmUubS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChtb2RbaV0gJiYgbW9kW2ldLmV4cG9ydHMgJiYgZXhwb3J0ZWRUb0xvb2tGb3IuZXZlcnkoeCA9PiBtb2RbaV0uZXhwb3J0c1t4XSkpIHtcbiAgICAgIHJlc3VsdHMucHVzaChtb2RbaV0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHRzO1xufVxuXG5mdW5jdGlvbiBmaW5kV2ViUlRDTW9kdWxlKCkge1xuICBjb25zdCB2b2ljZUxvYWRlciA9IGZpbmRXZWJwYWNrTW9kdWxlKFsnaGFuZGxlU2Vzc2lvbkRlc2NyaXB0aW9uJ10pXG4gICAgLmZpbHRlcih4ID0+IF9fd2VicGFja1JlcXVpcmUubVt4LmlkXS50b1N0cmluZygpLm1hdGNoKC93ZWJraXRHZXRVc2VyTWVkaWEvKSlbMF07XG4gIGlmICghdm9pY2VMb2FkZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBmaW5kIHZvaWNlIGVuZ2luZSBsb2FkZXInKTtcbiAgfVxuICBjb25zdCB0ZXh0ID0gX193ZWJwYWNrUmVxdWlyZS5tW3ZvaWNlTG9hZGVyLmlkXS50b1N0cmluZygpO1xuICBjb25zdCByZWcgPSAvblxcKChbMC05XSspXFwpL2c7XG4gIGxldCByZXN1bHRzID0gW107XG4gIHZhciByZXMgPSBudWxsO1xuXG4gIHdoaWxlICgocmVzID0gcmVnLmV4ZWModGV4dCkpKSB7XG4gICAgcmVzdWx0cy5wdXNoKHJlcyk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0c1xuICAgIC5maWx0ZXIoeCA9PiAhX193ZWJwYWNrUmVxdWlyZS5jW3hbMV1dKVxuICAgIC5tYXAoeCA9PiBwYXJzZUludCh4WzFdKSlbMF07XG59XG5cbmZ1bmN0aW9uIGluamVjdGVkTW9kdWxlKG1vZHVsZSwgZXhwb3J0cywgd2VicGFja1JlcXVpcmUpIHtcbiAgY29uc29sZS5sb2coJ2luamVjdGVkIG1vZHVsZScpO1xuXG4gIGNvbnN0IG1vZHVsZXMgPSB3ZWJwYWNrUmVxdWlyZS5jO1xuICBsZXQgd2VicGFja1ZvaWNlRW5naW5lcyA9IFswXTtcblxuICB3aW5kb3cuX193ZWJwYWNrUmVxdWlyZSA9IHdlYnBhY2tSZXF1aXJlO1xuICB3aW5kb3cuX192b2ljZUVuZ2luZXMgPSB3ZWJwYWNrVm9pY2VFbmdpbmVzO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgd2VicGFja1JlcXVpcmUubS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChtb2R1bGVzW2ldICYmIG1vZHVsZXNbaV0uZXhwb3J0cyAmJiBtb2R1bGVzW2ldLmV4cG9ydHMuaGFuZGxlU2Vzc2lvbkRlc2NyaXB0aW9uKSB7XG4gICAgICB3ZWJwYWNrVm9pY2VFbmdpbmVzWzBdID0gbW9kdWxlc1tpXTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vaWYgKHdlYnBhY2tWb2ljZUVuZ2luZXNbMF0pIHtcbiAgLy8gIGNvbnNvbGUubG9nKCdGb3VuZCBleHBvcnRzIG9mIE5hdGl2ZVZvaWNlRW5naW5lLCBzZXR0aW5nIHRvIHNoaW0uLi4nKTtcbiAgLy8gIGZvciAodmFyIGkgPSAwOyBpIDwgd2VicGFja1ZvaWNlRW5naW5lcy5sZW5ndGg7IGkrKykge1xuICAvLyAgICBPYmplY3QuYXNzaWduKHdlYnBhY2tWb2ljZUVuZ2luZXNbaV0uZXhwb3J0cywgVm9pY2VFbmdpbmVTaGltKTtcbiAgLy8gIH1cbiAgLy99XG5cbiAgaWYgKHdlYnBhY2tWb2ljZUVuZ2luZXNbMF0pIHtcbiAgICBjb25zdCBudW0gPSBmaW5kV2ViUlRDTW9kdWxlKCk7XG4gICAgY29uc3Qgb2JqID0gX193ZWJwYWNrUmVxdWlyZShudW0pO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3ZWJwYWNrVm9pY2VFbmdpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBPYmplY3QuYXNzaWduKHdlYnBhY2tWb2ljZUVuZ2luZXNbaV0uZXhwb3J0cywgb2JqKTtcbiAgICAgIHdlYnBhY2tWb2ljZUVuZ2luZXNbaV0ucGxheVNvdW5kID0gVm9pY2VFbmdpbmUucGxheVNvdW5kO1xuICAgIH1cbiAgfVxuXG4gIG1vZHVsZS5leHBvcnRzID0geyBtYmlsa2VyOiB0cnVlIH07XG59XG5cbmZ1bmN0aW9uIGFmdGVySW5pdGlhbEpzb25wKCkge1xuICBjb25zb2xlLmxvZyh3aW5kb3dbJ3dlYnBhY2tKc29ucCddKTtcblxuICB3aW5kb3dbJ3dlYnBhY2tKc29ucCddKFswXSwgW2luamVjdGVkTW9kdWxlXSk7XG59XG5cbi8vd2luZG93Wyd3ZWJwYWNrSnNvbnAnXSA9IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSwgJ3BhcmVudCB3ZWJwYWNrOicpO1xud2luZG93Wyd3ZWJwYWNrSnNvbnAnXSA9IHdlYnBhY2tDYjtcbndpbmRvd1snZmluZFdlYnBhY2tNb2R1bGUnXSA9IGZpbmRXZWJwYWNrTW9kdWxlO1xud2luZG93WydmaW5kV2ViUlRDTW9kdWxlJ10gPSBmaW5kV2ViUlRDTW9kdWxlO1xuIl19

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcmVsb2FkLmpzIn0=