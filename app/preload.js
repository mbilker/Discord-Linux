'use strict';

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _electron = require('electron');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

console.log('I run before anything else');

var runWebpackCb = false;

function noop() {};

function webpackCb(chunkIds, moreModules) {
  if (runWebpackCb) return;
  runWebpackCb = true;

  console.log('parent webpack');

  setImmediate(afterInitialJsonp);
}

function findWebpackModule(exportedToLookFor) {
  var webpackRequire = window.__webpackRequire;
  var mod = webpackRequire.c;
  var results = [];

  for (var i = 0; i < webpackRequire.m.length; i++) {
    if (mod[i] && mod[i].exports && exportedToLookFor.every(function (x) {
      return mod[i].exports[x];
    })) {
      results.push(mod[i]);
    }
  }

  return results;
}

var loadedVoiceEngine = null;
function findWebRTCModule() {
  if (loadedVoiceEngine) {
    return loadedVoiceEngine;
  }

  var voiceLoader = findWebpackModule(['handleSessionDescription']).filter(function (x) {
    return __webpackRequire.m[x.id].toString().match(/webkitGetUserMedia/);
  })[0];
  if (!voiceLoader) {
    throw new Error('Cannot find voice engine loader');
  }
  var text = __webpackRequire.m[voiceLoader.id].toString();
  var reg = /n\(([0-9]+)\)/g;
  var results = [];
  var res = null;

  while (res = reg.exec(text)) {
    results.push(res);
  }

  loadedVoiceEngine = results.filter(function (x) {
    return !__webpackRequire.c[x[1]];
  }).map(function (x) {
    return parseInt(x[1]);
  })[0];

  return loadedVoiceEngine;
}

function shimVoiceEngine(voiceEngine) {
  var num = findWebRTCModule();
  var obj = __webpackRequire(num);

  var playSound = findWebpackModule(['playSound']).filter(function (x) {
    return Object.keys(x.exports).length === 1;
  })[0].exports.playSound;


  Object.assign(voiceEngine, obj);
  voiceEngine.playSound = function playSound2(name, volume) {
    playSound(name, volume, true);
  };
  voiceEngine.setOnSpeakingCallback = voiceEngine.onSpeaking;
  voiceEngine.setOnVoiceCallback = voiceEngine.onVoiceActivity;
  voiceEngine.setDeviceChangeCallback = voiceEngine.onDevicesChanged;
}

function injectedModule(module, exports, webpackRequire) {
  console.log('injected module');

  var modules = webpackRequire.c;
  var webpackVoiceEngines = [0];

  window.__webpackRequire = webpackRequire;
  window.__voiceEngines = webpackVoiceEngines;

  for (var i = 0; i < webpackRequire.m.length; i++) {
    if (modules[i] && modules[i].exports && modules[i].exports.handleSessionDescription) {
      webpackVoiceEngines[0] = modules[i];
      break;
    }
  }

  if (webpackVoiceEngines[0]) {
    for (var i = 0; i < webpackVoiceEngines.length; i++) {
      shimVoiceEngine(webpackVoiceEngines[i].exports);
    }
  }

  module.exports = { mbilker: true };
}

function afterInitialJsonp() {
  console.log(window['webpackJsonp']);

  window['webpackJsonp']([0], [injectedModule]);
}

//window['webpackJsonp'] = console.log.bind(console, 'parent webpack:');
window['webpackJsonp'] = webpackCb;
window['findWebpackModule'] = findWebpackModule;
window['findWebRTCModule'] = findWebRTCModule;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYi5Wb2ljZUVuZ2luZS5zaGltLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxRQUFRLEdBQVIsQ0FBWSw0QkFBWjs7QUFLQSxJQUFJLGVBQWUsS0FBZjs7QUFFSixTQUFTLElBQVQsR0FBZ0IsRUFBaEI7O0FBRUEsU0FBUyxTQUFULENBQW1CLFFBQW5CLEVBQTZCLFdBQTdCLEVBQTBDO0FBQ3hDLE1BQUksWUFBSixFQUFrQixPQUFsQjtBQUNBLGlCQUFlLElBQWYsQ0FGd0M7O0FBSXhDLFVBQVEsR0FBUixDQUFZLGdCQUFaLEVBSndDOztBQU14QyxlQUFhLGlCQUFiLEVBTndDO0NBQTFDOztBQVNBLFNBQVMsaUJBQVQsQ0FBMkIsaUJBQTNCLEVBQThDO0FBQzVDLE1BQU0saUJBQWlCLE9BQU8sZ0JBQVAsQ0FEcUI7QUFFNUMsTUFBTSxNQUFNLGVBQWUsQ0FBZixDQUZnQztBQUc1QyxNQUFJLFVBQVUsRUFBVixDQUh3Qzs7QUFLNUMsT0FBSyxJQUFJLElBQUksQ0FBSixFQUFPLElBQUksZUFBZSxDQUFmLENBQWlCLE1BQWpCLEVBQXlCLEdBQTdDLEVBQWtEO0FBQ2hELFFBQUksSUFBSSxDQUFKLEtBQVUsSUFBSSxDQUFKLEVBQU8sT0FBUCxJQUFrQixrQkFBa0IsS0FBbEIsQ0FBd0I7YUFBSyxJQUFJLENBQUosRUFBTyxPQUFQLENBQWUsQ0FBZjtLQUFMLENBQXBELEVBQTZFO0FBQy9FLGNBQVEsSUFBUixDQUFhLElBQUksQ0FBSixDQUFiLEVBRCtFO0tBQWpGO0dBREY7O0FBTUEsU0FBTyxPQUFQLENBWDRDO0NBQTlDOztBQWNBLElBQUksb0JBQW9CLElBQXBCO0FBQ0osU0FBUyxnQkFBVCxHQUE0QjtBQUMxQixNQUFJLGlCQUFKLEVBQXVCO0FBQ3JCLFdBQU8saUJBQVAsQ0FEcUI7R0FBdkI7O0FBSUEsTUFBTSxjQUFjLGtCQUFrQixDQUFDLDBCQUFELENBQWxCLEVBQ2pCLE1BRGlCLENBQ1Y7V0FBSyxpQkFBaUIsQ0FB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TyxPQUFQLEdBQWlCLEVBQUUsU0FBUyxJQUFULEVBQW5CLENBdEJ1RDtDQUF6RDs7QUF5QkEsU0FBUyxpQkFBVCxHQUE2QjtBQUMzQixVQUFRLEdBQVIsQ0FBWSxPQUFPLGNBQVAsQ0FBWixFQUQyQjs7QUFHM0IsU0FBTyxjQUFQLEVBQXVCLENBQUMsQ0FBRCxDQUF2QixFQUE0QixDQUFDLGNBQUQsQ0FBNUIsRUFIMkI7Q0FBN0I7OztBQU9BLE9BQU8sY0FBUCxJQUF5QixTQUF6QjtBQUNBLE9BQU8sbUJBQVAsSUFBOEIsaUJBQTlCO0FBQ0EsT0FBTyxrQkFBUCxJQUE2QixnQkFBN0IiLCJmaWxlIjoid2ViLlZvaWNlRW5naW5lLnNoaW0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zb2xlLmxvZygnSSBydW4gYmVmb3JlIGFueXRoaW5nIGVsc2UnKTtcblxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQge2lwY1JlbmRlcmVyfSBmcm9tICdlbGVjdHJvbic7XG5cbnZhciBydW5XZWJwYWNrQ2IgPSBmYWxzZTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9O1xuXG5mdW5jdGlvbiB3ZWJwYWNrQ2IoY2h1bmtJZHMsIG1vcmVNb2R1bGVzKSB7XG4gIGlmIChydW5XZWJwYWNrQ2IpIHJldHVybjtcbiAgcnVuV2VicGFja0NiID0gdHJ1ZTtcblxuICBjb25zb2xlLmxvZygncGFyZW50IHdlYnBhY2snKTtcblxuICBzZXRJbW1lZGlhdGUoYWZ0ZXJJbml0aWFsSnNvbnApO1xufVxuXG5mdW5jdGlvbiBmaW5kV2VicGFja01vZHVsZShleHBvcnRlZFRvTG9va0Zvcikge1xuICBjb25zdCB3ZWJwYWNrUmVxdWlyZSA9IHdpbmRvdy5fX3dlYnBhY2tSZXF1aXJlO1xuICBjb25zdCBtb2QgPSB3ZWJwYWNrUmVxdWlyZS5jO1xuICBsZXQgcmVzdWx0cyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgd2VicGFja1JlcXVpcmUubS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChtb2RbaV0gJiYgbW9kW2ldLmV4cG9ydHMgJiYgZXhwb3J0ZWRUb0xvb2tGb3IuZXZlcnkoeCA9PiBtb2RbaV0uZXhwb3J0c1t4XSkpIHtcbiAgICAgIHJlc3VsdHMucHVzaChtb2RbaV0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHRzO1xufVxuXG5sZXQgbG9hZGVkVm9pY2VFbmdpbmUgPSBudWxsO1xuZnVuY3Rpb24gZmluZFdlYlJUQ01vZHVsZSgpIHtcbiAgaWYgKGxvYWRlZFZvaWNlRW5naW5lKSB7XG4gICAgcmV0dXJuIGxvYWRlZFZvaWNlRW5naW5lO1xuICB9XG5cbiAgY29uc3Qgdm9pY2VMb2FkZXIgPSBmaW5kV2VicGFja01vZHVsZShbJ2hhbmRsZVNlc3Npb25EZXNjcmlwdGlvbiddKVxuICAgIC5maWx0ZXIoeCA9PiBfX3dlYnBhY2tSZXF1aXJlLm1beC5pZF0udG9TdHJpbmcoKS5tYXRjaCgvd2Via2l0R2V0VXNlck1lZGlhLykpWzBdO1xuICBpZiAoIXZvaWNlTG9hZGVyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZmluZCB2b2ljZSBlbmdpbmUgbG9hZGVyJyk7XG4gIH1cbiAgY29uc3QgdGV4dCA9IF9fd2VicGFja1JlcXVpcmUubVt2b2ljZUxvYWRlci5pZF0udG9TdHJpbmcoKTtcbiAgY29uc3QgcmVnID0gL25cXCgoWzAtOV0rKVxcKS9nO1xuICBsZXQgcmVzdWx0cyA9IFtdO1xuICB2YXIgcmVzID0gbnVsbDtcblxuICB3aGlsZSAoKHJlcyA9IHJlZy5leGVjKHRleHQpKSkge1xuICAgIHJlc3VsdHMucHVzaChyZXMpO1xuICB9XG5cbiAgbG9hZGVkVm9pY2VFbmdpbmUgPSAgcmVzdWx0c1xuICAgIC5maWx0ZXIoeCA9PiAhX193ZWJwYWNrUmVxdWlyZS5jW3hbMV1dKVxuICAgIC5tYXAoeCA9PiBwYXJzZUludCh4WzFdKSlbMF07XG5cbiAgcmV0dXJuIGxvYWRlZFZvaWNlRW5naW5lO1xufVxuXG5mdW5jdGlvbiBzaGltVm9pY2VFbmdpbmUodm9pY2VFbmdpbmUpIHtcbiAgY29uc3QgbnVtID0gZmluZFdlYlJUQ01vZHVsZSgpO1xuICBjb25zdCBvYmogPSBfX3dlYnBhY2tSZXF1aXJlKG51bSk7XG5cbiAgY29uc3Qge3BsYXlTb3VuZH0gPSBmaW5kV2VicGFja01vZHVsZShbJ3BsYXlTb3VuZCddKS5maWx0ZXIoeCA9PiBPYmplY3Qua2V5cyh4LmV4cG9ydHMpLmxlbmd0aCA9PT0gMSlbMF0uZXhwb3J0cztcblxuICBPYmplY3QuYXNzaWduKHZvaWNlRW5naW5lLCBvYmopO1xuICB2b2ljZUVuZ2luZS5wbGF5U291bmQgPSBmdW5jdGlvbiBwbGF5U291bmQyKG5hbWUsIHZvbHVtZSkge1xuICAgIHBsYXlTb3VuZChuYW1lLCB2b2x1bWUsIHRydWUpO1xuICB9O1xuICB2b2ljZUVuZ2luZS5zZXRPblNwZWFraW5nQ2FsbGJhY2sgPSB2b2ljZUVuZ2luZS5vblNwZWFraW5nO1xuICB2b2ljZUVuZ2luZS5zZXRPblZvaWNlQ2FsbGJhY2sgPSB2b2ljZUVuZ2luZS5vblZvaWNlQWN0aXZpdHk7XG4gIHZvaWNlRW5naW5lLnNldERldmljZUNoYW5nZUNhbGxiYWNrID0gdm9pY2VFbmdpbmUub25EZXZpY2VzQ2hhbmdlZDtcbn1cblxuZnVuY3Rpb24gaW5qZWN0ZWRNb2R1bGUobW9kdWxlLCBleHBvcnRzLCB3ZWJwYWNrUmVxdWlyZSkge1xuICBjb25zb2xlLmxvZygnaW5qZWN0ZWQgbW9kdWxlJyk7XG5cbiAgY29uc3QgbW9kdWxlcyA9IHdlYnBhY2tSZXF1aXJlLmM7XG4gIGxldCB3ZWJwYWNrVm9pY2VFbmdpbmVzID0gWzBdO1xuXG4gIHdpbmRvdy5fX3dlYnBhY2tSZXF1aXJlID0gd2VicGFja1JlcXVpcmU7XG4gIHdpbmRvdy5fX3ZvaWNlRW5naW5lcyA9IHdlYnBhY2tWb2ljZUVuZ2luZXM7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB3ZWJwYWNrUmVxdWlyZS5tLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKG1vZHVsZXNbaV0gJiYgbW9kdWxlc1tpXS5leHBvcnRzICYmIG1vZHVsZXNbaV0uZXhwb3J0cy5oYW5kbGVTZXNzaW9uRGVzY3JpcHRpb24pIHtcbiAgICAgIHdlYnBhY2tWb2ljZUVuZ2luZXNbMF0gPSBtb2R1bGVzW2ldO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKHdlYnBhY2tWb2ljZUVuZ2luZXNbMF0pIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdlYnBhY2tWb2ljZUVuZ2luZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNoaW1Wb2ljZUVuZ2luZSh3ZWJwYWNrVm9pY2VFbmdpbmVzW2ldLmV4cG9ydHMpO1xuICAgIH1cbiAgfVxuXG4gIG1vZHVsZS5leHBvcnRzID0geyBtYmlsa2VyOiB0cnVlIH07XG59XG5cbmZ1bmN0aW9uIGFmdGVySW5pdGlhbEpzb25wKCkge1xuICBjb25zb2xlLmxvZyh3aW5kb3dbJ3dlYnBhY2tKc29ucCddKTtcblxuICB3aW5kb3dbJ3dlYnBhY2tKc29ucCddKFswXSwgW2luamVjdGVkTW9kdWxlXSk7XG59XG5cbi8vd2luZG93Wyd3ZWJwYWNrSnNvbnAnXSA9IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSwgJ3BhcmVudCB3ZWJwYWNrOicpO1xud2luZG93Wyd3ZWJwYWNrSnNvbnAnXSA9IHdlYnBhY2tDYjtcbndpbmRvd1snZmluZFdlYnBhY2tNb2R1bGUnXSA9IGZpbmRXZWJwYWNrTW9kdWxlO1xud2luZG93WydmaW5kV2ViUlRDTW9kdWxlJ10gPSBmaW5kV2ViUlRDTW9kdWxlO1xuIl19

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcmVsb2FkLmpzIn0=